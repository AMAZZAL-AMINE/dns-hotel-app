{"version":3,"file":"errors.js","sourceRoot":"","sources":["../src/errors.ts"],"names":[],"mappings":"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","sourcesContent":["export enum ErrorCode {\n  UKNOWN_ERROR = 'UNKNOWN_ERROR',\n  SERVER_ERROR = 'SERVER_ERROR',\n  CREDENTIALS_DIST_CERT_MISMATCH = 'EAS_BUILD_CREDENTIALS_DIST_CERT_MISMATCH',\n  SYSTEM_DEPS_INSTALL_ERROR = 'EAS_BUILD_SYSTEM_DEPS_INSTALL_ERROR',\n  UNSUPPORTED_COCOAPODS_VERSION_ERROR = 'EAS_BUILD_UNSUPPORTED_COCOAPODS_VERSION_ERROR',\n  UNSUPPORTED_BUNDLER_VERSION_ERROR = 'EAS_BUILD_UNSUPPORTED_BUNDLER_VERSION_ERROR',\n  INVALID_KEYSTORE_FORMAT_ERROR = 'EAS_BUILD_INVALID_KEYSTORE_FORMAT_ERROR',\n  INVALID_KEYSTORE_ALIAS_ERROR = 'EAS_BUILD_INVALID_KEYSTORE_ALIAS_ERROR',\n  MISSING_GOOGLE_SERVICES_JSON_ERROR = 'EAS_BUILD_MISSING_GOOGLE_SERVICES_JSON_ERROR',\n  MISSING_GOOGLE_SERVICES_PLIST_ERROR = 'EAS_BUILD_MISSING_GOOGLE_SERVICES_PLIST_ERROR',\n  INCOMPATIBLE_PODS_MANAGED_WORKFLOW_ERROR = 'EAS_BUILD_INCOMPATIBLE_PODS_MANAGED_WORKFLOW_ERROR',\n  INCOMPATIBLE_PODS_GENERIC_WORKFLOW_ERROR = 'EAS_BUILD_INCOMPATIBLE_PODS_GENERIC_WORKFLOW_ERROR',\n  YARN_LOCK_CHECKSUM_ERROR = 'EAS_BUILD_YARN_LOCK_CHECKSUM_ERROR',\n  YARN_MULTIPLE_INSTANCES_ERROR = 'EAS_BUILD_YARN_MULTIPLE_INSTANCES_ERROR',\n  NPM_PACKAGE_CORRUPTED_ERROR = 'EAS_BUILD_NPM_PACKAGE_CORRUPTED_ERROR',\n  UNKNOWN_FASTLANE_ERROR = 'EAS_BUILD_UNKNOWN_FASTLANE_ERROR',\n  UNKNOWN_GRADLE_ERROR = 'EAS_BUILD_UNKNOWN_GRADLE_ERROR',\n  BUILD_TIMEOUT_ERROR = 'EAS_BUILD_TIMEOUT_ERROR',\n}\n\nexport interface ExternalUserError {\n  errorCode: string;\n  message: string;\n  docsUrl?: string;\n}\n\nexport abstract class UserError extends Error {\n  public abstract errorCode: ErrorCode;\n  public docsUrl?: string;\n  public innerError?: Error;\n\n  public format(): ExternalUserError {\n    return {\n      errorCode: this.errorCode,\n      message: this.message,\n      docsUrl: this.docsUrl,\n    };\n  }\n}\n\nexport class UnknownError extends UserError {\n  errorCode = ErrorCode.UKNOWN_ERROR;\n  message = 'Unknown error. See logs for more information.';\n}\n\nexport class ServerError extends UserError {\n  errorCode = ErrorCode.SERVER_ERROR;\n  message = 'Internal Server Error.\\nTry again later. If the problem persists, report the issue.';\n}\n\nexport class BuildTimeout extends ServerError {\n  constructor(maxBuildTimeMs: number) {\n    super();\n    this.message = `Your build exceeded the maximum build time of ${\n      maxBuildTimeMs / (60 * 1000)\n    } minutes.`;\n  }\n}\n\nexport class CredentialsDistCertMismatchError extends UserError {\n  errorCode = ErrorCode.CREDENTIALS_DIST_CERT_MISMATCH;\n  message = \"Provisioning profile and distribution certificate don't match.\";\n}\n\nexport class SystemDepsInstallError extends UserError {\n  errorCode = ErrorCode.SYSTEM_DEPS_INSTALL_ERROR;\n\n  constructor(dependency: string) {\n    super();\n    this.message = `Failed to install ${dependency}. Make sure you specified the correct version in eas.json.`;\n  }\n}\n\nexport class InvalidKeystoreFormatError extends UserError {\n  errorCode = ErrorCode.INVALID_KEYSTORE_FORMAT_ERROR;\n  message =\n    'The keystore used in this build is malformed or it has an unsupported type. Make sure you provided the correct file.';\n}\n\nexport class InvalidKeystoreAliasError extends UserError {\n  errorCode = ErrorCode.INVALID_KEYSTORE_FORMAT_ERROR;\n  message =\n    'The alias specified for this keystore does not exist. Make sure you specified the correct value.';\n}\n\nexport class UnsupportedCocoaPodsVersion extends UserError {\n  errorCode = ErrorCode.UNSUPPORTED_COCOAPODS_VERSION_ERROR;\n  message = `Your project requires a newer version of CocoaPods. You can update it in the build profile in eas.json by either:\n- changing the current version under key \"cocoapods\"\n- switching to an image that supports that version under key \"image\"`;\n  docsUrl = 'https://docs.expo.dev/build-reference/eas-json/';\n}\n\nexport class UnsupportedBundlerVersion extends UserError {\n  errorCode = ErrorCode.UNSUPPORTED_BUNDLER_VERSION_ERROR;\n  message = `Your project requires a different version of the Ruby \"bundler\" program than the version installed in this EAS Build environment. You can specify which version of \"bundler\" to install by specifying the version under \"build\"→[buildProfileName]→\"ios\"→\"bundler\" in eas.json.`;\n  docsUrl = 'https://docs.expo.dev/build-reference/eas-json/';\n}\n\nexport class MissingGoogleServicesJson extends UserError {\n  errorCode = ErrorCode.MISSING_GOOGLE_SERVICES_JSON_ERROR;\n  message =\n    '\"google-services.json\" is missing, make sure that file exists. Remember that EAS Build only uploads the files tracked by git.';\n}\n\nexport class MissingGoogleServicesPlist extends UserError {\n  errorCode = ErrorCode.MISSING_GOOGLE_SERVICES_PLIST_ERROR;\n  message =\n    '\"GoogleService-Info.plist\" is missing, make sure that file exists. Remember that EAS Build only uploads the files tracked by git.';\n}\n\nexport class UnknownFastlaneError extends UserError {\n  errorCode = ErrorCode.UNKNOWN_FASTLANE_ERROR;\n  message = `Fastlane build failed with unknown error. See logs for the \"Run fastlane\" and \"Xcode Logs\" phases for more information.\nFastlane errors in most cases are not printed at the end of the output, so you may not find any useful information in the last lines of output when looking for an error message.`;\n}\n\nexport class IncompatiblePodsManagedWorkflowError extends UserError {\n  errorCode = ErrorCode.INCOMPATIBLE_PODS_MANAGED_WORKFLOW_ERROR;\n\n  constructor(usingDefaultCacheConfig: boolean) {\n    super();\n    this.message = `Compatible versions of some pods could not be resolved.\nYou are seeing this error because either:\n  - Versions in the Podfile.lock cached by EAS do not match required values for some of the libraries, it can be triggered when upgrading Expo SDK or any other library with native code. To fix that ${\n    usingDefaultCacheConfig\n      ? 'add the \"cache.key\" field (it can be set to any value) in the build profile in eas.json to invalidate the cache.'\n      : 'update value of the \"cache.key\" field in the build profile in eas.json to invalidate the cache.'\n  }\n  - Some of your npm packages have native code that depend on different versions of the same pod. See logs for more information.\n`;\n  }\n}\n\nexport class IncompatiblePodsGenericWorkflowError extends UserError {\n  errorCode = ErrorCode.INCOMPATIBLE_PODS_GENERIC_WORKFLOW_ERROR;\n\n  constructor(usingDefaultCacheConfig: boolean) {\n    super();\n    this.message = `Compatible versions of some pods could not be resolved.\nYou are seeing this error because either:\n  - Versions in the Podfile.lock cached by EAS do not match required values in Podspecs of some of the libraries. To fix that ${\n    usingDefaultCacheConfig\n      ? 'add the \"cache.key\" field (it can be set to any value) in the build profile in eas.json to invalidate the cache.'\n      : 'update value of the \"cache.key\" field in the build profile in eas.json to invalidate the cache.'\n  }\n  - Some of the pods used in your project depend on different versions of the same pod. See logs for more information.\n`;\n  }\n}\n\nexport class YarnMultipleInstancesError extends UserError {\n  errorCode = ErrorCode.YARN_MULTIPLE_INSTANCES_ERROR;\n\n  constructor() {\n    super();\n    this.message = `One of project dependencies is starting new install process while the main one is still in progress, which might result in corrupted packages. Most likely the reason for error is \"prepare\" script in git-referenced dependency of your project. Learn more: https://github.com/yarnpkg/yarn/issues/7212#issuecomment-493720324`;\n  }\n}\n\nexport class YarnLockChecksumError extends UserError {\n  errorCode = ErrorCode.YARN_LOCK_CHECKSUM_ERROR;\n\n  constructor(packageName: string) {\n    super();\n    this.message = `Checksum for package \"${packageName}\" does not match value in registry. To fix that:\n- run \"yarn cache clean\"\n- remove yarn.lock (or only the section for that package)\n- run \"yarn install --force\"`;\n  }\n}\n\nexport class UnknownGradleError extends UserError {\n  errorCode = ErrorCode.UNKNOWN_GRADLE_ERROR;\n  message =\n    'Gradle build failed with unknown error. See logs for the \"Run gradlew\" phase for more information.';\n}\n"]}